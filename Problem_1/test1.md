### 测试用例

**Input 1**
```
6 4
S 2 4
H 1 3
H 3 5
S 1 6
```
**Output 1**
```
3
```

**Input 2**
```
5 3
S 1 2
S 3 5
H 1 4
```
**Output 2**
```
3
```

**Input 3**

```
7 5
S 2 3
S 3 5
H 1 4
H 5 7
S 2 6
```
**Output 3**
```
4
```

**Input 4**
```
7 5
H 1 2
S 1 3
S 3 7
H 1 5
H 4 6
```
**Output 4**
```
4
```

**Input 5**
```
10 6
H 1 2
H 1 3
S 4 7
H 5 8
H 8 9
S 6 10
```
**Output 5**
```
6
```
